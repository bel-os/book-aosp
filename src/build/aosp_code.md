# دریافت کد AOSP

کد پروژه‌ی AOSP در قالب تعداد زیادی مخزن گیت نگهداری می‌شود. برای دریافت تمامی این کدها، از ابزاری به نام repo استفاده می‌شود. ابتدا برای ساخت یک پوشه مخصوص کدهای AOSP و دریافت ابزار repo این دستورها را اجرا نمایید:

~~~ text
mkdir AOSP
cd AOSP
curl https://storage.googleapis.com/git-repo-downloads/repo > repo
chmod +x repo

~~~

لازم به توضیح است که روش‌ها و دستورهای معرفی شده در مستندات فنی AOSP برای سیستم‌های لینوکسی ارائه شده است. کاربرانی که از Mac OS استفاده می‌کنند می‌توانند با برخی تغییرات احتمالی فرآیندها را انجام دهند. راهنمای [راه‌اندازی AOSP برای Mac OS](https://source.android.com/setup/build/initializing#setting-up-a-mac-os-x-build-environment) می‌تواند کمک خوبی برای این کار باشد. انجام فرآیند ساخت مشابه AOSP روی سیستم‌های ویندوزی فعلاً پشتیبانی نمی‌شود.

قبل از اجرای دستورات بعدی، اگر اطلاعات شخصی شما در `git` پیکربندی نشده است، با این دستورات آن را تنظیم نمایید؛

~~~ text
git config --global user.email "you@example.com"
git config --global user.name "Your Name"
~~~

برای پیکربندی اولیه، این دستور را اجرا نمایید:

~~~ text
python2 repo init -u http://example.com/AOSPproject/android.git -b BRANCH --depth=5
~~~

سپس برای دریافت تمامی اجزای کد، این دستورها را اجرا نمایید:

~~~ text
python2 repo sync
~~~

توجه کنید که دریافت کدها، حتی روی شبکه‌ی محلی می‌تواند زمان‌بر باشد. در صورت بروز مشکل یا تکمیل نشدن فرآیند، بدون هیچ مشکلی می‌توانید دستور فوق را مجدداَ اجرا نمایید. اجرای مجدد دستور، تمامی مخزن‌هایی که تاکنون دریافت نشده‌اند را دریافت می‌کند و مخزن‌های موجود را به روزرسانی می‌کند. لازم به توضیح است که در حین دریافت اولیه، فایل‌های دریافتی در پوشه‌ی `.repo` ذخیره می‌شوند و در انتها این کدها در ساختار نهایی و پوشه‌های اصلی قرار می‌گیرند. در نتیجه تا پایان اولین همگام‌سازی، پوشه‌های کدها را مشاهده نخواهید کرد و این مسئله نشان از مشکل در دریافت مخزن‌ها نیست. برای دریافت تغییرات جدید کد، می‌توانید در آینده مجدد وارد پوشه‌ی کد خود (که با نام `AOSP` ساخته شد) شوید و با دستور `repo sync` آخرین نسخه‌ی کد AOSP را دریافت کنید.

می‌توانید ابزار repo را به صورت عمومی نیز نصب کنید تا از هر آدرسی تنها با فراخوانی دستور `repo` قابل اجرا باشد. برای این کار به [راهنمای AOSP برای نصب repo](https://source.android.com/setup/build/downloading#installing-repo) مراجعه کنید. برای اطمینان از صحت کد دریافت شده نیز می‌توانید SHA256 فایل دریافت شده را با مقادیر همین صفحه مقایسه کنید.
